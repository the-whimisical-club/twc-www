{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/avan/github/twc-www/utils/supabase/server.ts"],"sourcesContent":["\nimport { createServerClient, type CookieOptions } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY;\n\nexport const createClient = async (cookieStore: ReturnType<typeof cookies>) => {\n  const cookieStoreResolved = await cookieStore;\n  return createServerClient(\n    supabaseUrl!,\n    supabaseKey!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStoreResolved.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) => cookieStoreResolved.set(name, value, options))\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  );\n};\n"],"names":[],"mappings":";;;;AACA;AAAA;;AAGA,MAAM;AACN,MAAM;AAEC,MAAM,eAAe,OAAO;IACjC,MAAM,sBAAsB,MAAM;IAClC,OAAO,IAAA,+LAAkB,EACvB,aACA,aACA;QACE,SAAS;YACP;gBACE,OAAO,oBAAoB,MAAM;YACnC;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,oBAAoB,GAAG,CAAC,MAAM,OAAO;gBAC1F,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/avan/github/twc-www/app/actions/auth.ts"],"sourcesContent":["'use server'\n\nimport { createClient } from '@/utils/supabase/server'\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\n\nexport async function sendOTP(formData: FormData) {\n  const email = formData.get('email') as string\n\n  if (!email) {\n    return { error: 'Email is required' }\n  }\n\n  const cookieStore = cookies()\n  const supabase = await createClient(cookieStore)\n\n  // Note: For OTP codes to be sent instead of magic links, you must modify\n  // the Magic Link email template in Supabase Dashboard:\n  // Authentication > Email Templates > Magic Link\n  // Replace the template content to include {{ .Token }} variable:\n  // <h2>One time login code</h2>\n  // <p>Please enter this code: {{ .Token }}</p>\n  const { error } = await supabase.auth.signInWithOtp({\n    email,\n    options: {\n      shouldCreateUser: true,\n      // Don't set emailRedirectTo to ensure OTP mode (not magic link)\n    },\n  })\n\n  if (error) {\n    return { error: error.message }\n  }\n\n  return { success: true, email }\n}\n\nexport async function verifyOTP(formData: FormData) {\n  const email = formData.get('email') as string\n  const token = formData.get('code') as string\n\n  if (!email || !token) {\n    return { error: 'Email and code are required' }\n  }\n\n  const cookieStore = cookies()\n  const supabase = await createClient(cookieStore)\n\n  const { error, data } = await supabase.auth.verifyOtp({\n    email,\n    token,\n    type: 'email',\n  })\n\n  if (error) {\n    return { error: error.message }\n  }\n\n  if (data.session) {\n    redirect('/')\n  }\n\n  return { error: 'Verification failed' }\n}\n\nexport async function signOut() {\n  const cookieStore = cookies()\n  const supabase = await createClient(cookieStore)\n  await supabase.auth.signOut()\n  redirect('/signup')\n}\n\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;AAAA;;;;;;AAEO,eAAe,QAAQ,QAAkB;IAC9C,MAAM,QAAQ,SAAS,GAAG,CAAC;IAE3B,IAAI,CAAC,OAAO;QACV,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,MAAM,cAAc,IAAA,0IAAO;IAC3B,MAAM,WAAW,MAAM,IAAA,2IAAY,EAAC;IAEpC,yEAAyE;IACzE,uDAAuD;IACvD,gDAAgD;IAChD,iEAAiE;IACjE,+BAA+B;IAC/B,8CAA8C;IAC9C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,aAAa,CAAC;QAClD;QACA,SAAS;YACP,kBAAkB;QAEpB;IACF;IAEA,IAAI,OAAO;QACT,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAChC;IAEA,OAAO;QAAE,SAAS;QAAM;IAAM;AAChC;AAEO,eAAe,UAAU,QAAkB;IAChD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,QAAQ,SAAS,GAAG,CAAC;IAE3B,IAAI,CAAC,SAAS,CAAC,OAAO;QACpB,OAAO;YAAE,OAAO;QAA8B;IAChD;IAEA,MAAM,cAAc,IAAA,0IAAO;IAC3B,MAAM,WAAW,MAAM,IAAA,2IAAY,EAAC;IAEpC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,CAAC;QACpD;QACA;QACA,MAAM;IACR;IAEA,IAAI,OAAO;QACT,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAChC;IAEA,IAAI,KAAK,OAAO,EAAE;QAChB,IAAA,iMAAQ,EAAC;IACX;IAEA,OAAO;QAAE,OAAO;IAAsB;AACxC;AAEO,eAAe;IACpB,MAAM,cAAc,IAAA,0IAAO;IAC3B,MAAM,WAAW,MAAM,IAAA,2IAAY,EAAC;IACpC,MAAM,SAAS,IAAI,CAAC,OAAO;IAC3B,IAAA,iMAAQ,EAAC;AACX;;;IAhEsB;IA+BA;IA4BA;;AA3DA,+OAAA;AA+BA,+OAAA;AA4BA,+OAAA"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/avan/github/twc-www/.next-internal/server/app/verify/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {verifyOTP as '4094c5a9239de985b1309694b5fbd73d6c48284ad5'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}